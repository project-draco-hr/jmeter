{
  List props=new LinkedList();
  while (iter.hasNext()) {
    JMeterProperty val=iter.next();
    if (log.isDebugEnabled()) {
      log.debug("About to replace in property of type: " + val.getClass() + ": "+ val);
    }
    if (val instanceof StringProperty) {
      if (!val.getName().equals(TestElement.GUI_CLASS) && !val.getName().equals(TestElement.TEST_CLASS)) {
        val=transform.transformValue(val);
        if (log.isDebugEnabled()) {
          log.debug("Replacement result: " + val);
        }
      }
    }
 else     if (val instanceof MultiProperty) {
      MultiProperty multiVal=(MultiProperty)val;
      Collection newValues=replaceValues(multiVal.iterator(),transform);
      multiVal.clear();
      Iterator propIter=newValues.iterator();
      while (propIter.hasNext()) {
        multiVal.addProperty((JMeterProperty)propIter.next());
      }
      if (log.isDebugEnabled()) {
        log.debug("Replacement result: " + multiVal);
      }
    }
 else {
      if (log.isDebugEnabled()) {
        log.debug("Won't replace " + val);
      }
    }
    props.add(val);
  }
  return props;
}
