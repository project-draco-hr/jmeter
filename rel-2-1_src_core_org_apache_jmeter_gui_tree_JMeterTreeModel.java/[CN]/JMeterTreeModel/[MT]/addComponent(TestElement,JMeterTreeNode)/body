{
  if (node.getUserObject() instanceof AbstractConfigGui) {
    throw new IllegalUserActionException("This node cannot hold sub-elements");
  }
  component.setProperty(TestElement.GUI_CLASS,NameUpdater.getCurrentName(component.getPropertyAsString(TestElement.GUI_CLASS)));
  GuiPackage.getInstance().updateCurrentNode();
  JMeterGUIComponent guicomp=GuiPackage.getInstance().getGui(component);
  guicomp.configure(component);
  guicomp.modifyTestElement(component);
  GuiPackage.getInstance().getCurrentGui();
  JMeterTreeNode newNode=new JMeterTreeNode(component,this);
  try {
    if (component.getProperty(TestElement.ENABLED) instanceof NullProperty || component.getPropertyAsBoolean(TestElement.ENABLED)) {
      newNode.setEnabled(true);
    }
 else {
      newNode.setEnabled(false);
    }
  }
 catch (  Exception e) {
    newNode.setEnabled(true);
  }
  this.insertNodeInto(newNode,node,node.getChildCount());
  return newNode;
}
