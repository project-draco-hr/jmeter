{
  boolean isMaximumPriority=false;
  int normalCount=0;
  while (running) {
    long startTime=System.currentTimeMillis();
    processNotifications();
    long sleep=SLEEP_TIME - (System.currentTimeMillis() - startTime);
    if (!running) {
      break;
    }
    if (sleep < 0) {
      isMaximumPriority=true;
      normalCount=0;
      if (log.isInfoEnabled()) {
        log.info("ListenerNotifier exceeded maximum " + "notification time by " + (-sleep) + "ms");
      }
      boostPriority();
    }
 else {
      normalCount++;
      if (isMaximumPriority && normalCount >= 3) {
        isMaximumPriority=false;
        unboostPriority();
      }
      if (log.isDebugEnabled()) {
        log.debug("ListenerNotifier sleeping for " + sleep + "ms");
      }
      try {
        Thread.sleep(sleep);
      }
 catch (      InterruptedException e) {
      }
    }
  }
  processNotifications();
  isStopped=true;
}
