{
  this.startingLineNumber=reader.getLastLineNumber();
  if (shouldCreateEndTagAndExit()) {
    return createEndTagAndRepositionReader();
  }
  scanner.beforeScanningStarts();
  Node currentNode=tag;
  doEmptyXmlTagCheckOn(currentNode);
  if (!endTagFound) {
    do {
      currentNode=reader.readElement(balance_quotes);
      if (currentNode == null)       continue;
      currLine=reader.getCurrentLine();
      if (currentNode instanceof Tag)       doForceCorrectionCheckOn((Tag)currentNode);
      doEmptyXmlTagCheckOn(currentNode);
      if (!endTagFound)       doChildAndEndTagCheckOn(currentNode);
    }
 while (currentNode != null && !endTagFound);
  }
  if (endTag == null) {
    createCorrectionEndTagBefore(reader.getLastReadPosition() + 1);
  }
  this.endingLineNumber=reader.getLastLineNumber();
  return createTag();
}
