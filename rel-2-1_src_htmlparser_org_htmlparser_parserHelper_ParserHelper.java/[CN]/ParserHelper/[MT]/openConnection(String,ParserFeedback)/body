{
  final String prefix="file://localhost";
  String resource;
  URL url;
  StringBuffer buffer;
  URLConnection ret;
  try {
    url=new URL(LinkProcessor.fixSpaces(string));
    ret=ParserHelper.openConnection(url,feedback);
  }
 catch (  MalformedURLException murle) {
    try {
      File file=new File(string);
      resource=file.getCanonicalPath();
      buffer=new StringBuffer(prefix.length() + resource.length());
      buffer.append(prefix);
      buffer.append(resource);
      url=new URL(LinkProcessor.fixSpaces(buffer.toString()));
      ret=ParserHelper.openConnection(url,feedback);
      if (null != feedback)       feedback.info(url.toExternalForm());
    }
 catch (    MalformedURLException murle2) {
      String msg="HTMLParser.openConnection() : Error in opening a connection to " + string;
      ParserException ex=new ParserException(msg,murle2);
      if (null != feedback)       feedback.error(msg,ex);
      throw ex;
    }
catch (    IOException ioe) {
      String msg="HTMLParser.openConnection() : Error in opening a connection to " + string;
      ParserException ex=new ParserException(msg,ioe);
      if (null != feedback)       feedback.error(msg,ex);
      throw ex;
    }
  }
  return (ret);
}
