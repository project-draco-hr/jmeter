{
  double max=findMax(_data);
  try {
    if (_maxLength < 3) {
      _maxLength=3;
    }
    if (_title.length() == 0) {
      _title="Graph";
    }
    for (int i=0; i < _xAxisLabels.length; i++) {
      String label=_xAxisLabels[i];
      _xAxisLabels[i]=squeeze(label,_maxLength);
    }
    this.setPreferredSize(new Dimension(_width,_height));
    DataSeries dataSeries=new DataSeries(_xAxisLabels,_xAxisTitle,_yAxisTitle,_title);
    String[] legendLabels={yAxisLabel};
    Paint[] paints=new Paint[]{Color.yellow};
    BarChartProperties barChartProperties=new BarChartProperties();
    ValueLabelRenderer valueLabelRenderer=new ValueLabelRenderer(false,false,true,0);
    valueLabelRenderer.setValueLabelPosition(ValueLabelPosition.AT_TOP);
    valueLabelRenderer.useVerticalLabels(true);
    barChartProperties.addPostRenderEventListener(valueLabelRenderer);
    AxisChartDataSet axisChartDataSet=new AxisChartDataSet(_data,legendLabels,paints,ChartType.BAR,barChartProperties);
    dataSeries.addIAxisPlotDataSet(axisChartDataSet);
    ChartProperties chartProperties=new ChartProperties();
    LabelAxisProperties xaxis=new LabelAxisProperties();
    DataAxisProperties yaxis=new DataAxisProperties();
    try {
      BigDecimal round=new BigDecimal(max / 1000d);
      round=round.setScale(0,BigDecimal.ROUND_UP);
      double topValue=round.doubleValue() * 1000;
      yaxis.setUserDefinedScale(0,500);
      yaxis.setNumItems((int)(topValue / 500) + 1);
      yaxis.setShowGridLines(1);
    }
 catch (    PropertyException e) {
      log.warn("",e);
    }
    AxisProperties axisProperties=new AxisProperties(xaxis,yaxis);
    axisProperties.setXAxisLabelsAreVertical(true);
    LegendProperties legendProperties=new LegendProperties();
    AxisChart axisChart=new AxisChart(dataSeries,chartProperties,axisProperties,legendProperties,_width,_height);
    axisChart.setGraphics2D((Graphics2D)g);
    axisChart.render();
  }
 catch (  ChartDataException e) {
    log.warn("",e);
  }
catch (  PropertyException e) {
    log.warn("",e);
  }
}
