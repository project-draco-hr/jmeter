{
  if (samples.size() == 0) {
    startTime=timeStamp;
  }
  if (sample > max) {
    max=sample;
  }
  averageSum+=sample;
  long average=averageSum / ++counter;
  variationSum+=Math.pow(sample - average,2);
  long deviation=(long)Math.pow(variationSum / counter,0.5);
  float throughput=0;
  if (timeStamp - startTime > 0) {
    throughput=(float)(((float)(samples.size() + 1)) / ((float)(timeStamp - startTime)) * 60000);
  }
  if (throughput > throughputMax) {
    bigChange=true;
    throughputMax=(int)(throughput * 1.5F);
  }
  if (average > graphMax) {
    bigChange=true;
    graphMax=average * 3;
  }
  if (deviation > graphMax) {
    bigChange=true;
    graphMax=deviation * 3;
  }
  Sample s=new Sample(sample,average,deviation,throughput,!success);
  previous=sample;
  current=s;
  samples.add(s);
  return s;
}
