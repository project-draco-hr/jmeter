{
  if (!sample.isSuccessful()) {
    failureCount++;
  }
 else {
    successCount++;
  }
  if (this.isFailing() && !siteDown && !failureMsgSent) {
    Vector addressVector=getAddressVector();
    if (addressVector.size() != 0) {
      try {
        sendMail(fromAddress,addressVector,failureSubject,"URL Failed: " + sample.getSampleLabel(),smtpHost);
      }
 catch (      Exception e) {
        log.error("Problem sending mail",e);
      }
      siteDown=true;
      failureMsgSent=true;
      successCount=0;
    }
  }
  if (siteDown && (sample.getTime() != -1) & !successMsgSent) {
    if (successCount > successLimit) {
      Vector addressVector=getAddressVector();
      try {
        sendMail(fromAddress,addressVector,successSubject,"URL Restarted: " + sample.getSampleLabel(),smtpHost);
      }
 catch (      Exception e) {
        log.error("Problem sending mail",e);
      }
      siteDown=false;
      successMsgSent=true;
    }
  }
  if (successMsgSent && failureMsgSent) {
    clear();
  }
  notifyChangeListeners();
}
