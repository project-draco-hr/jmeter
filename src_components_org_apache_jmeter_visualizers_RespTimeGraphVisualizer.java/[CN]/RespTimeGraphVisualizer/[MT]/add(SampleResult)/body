{
  final String sampleLabel=sampleResult.getSampleLabel();
synchronized (lockInterval) {
    internalMap.put(Long.valueOf(sampleResult.getStartTime()),Long.valueOf(sampleResult.getTime()));
  }
  Matcher matcher=null;
  if (samplerSelection.isSelected() && samplerMatchLabel.getText() != null && samplerMatchLabel.getText().length() > 0) {
    Pattern pattern=createPattern(samplerMatchLabel.getText());
    matcher=pattern.matcher(sampleLabel);
  }
  if ((matcher == null) || (matcher.find())) {
    final long startTimeMS=sampleResult.getStartTime();
    final Integer startTimeInterval=Integer.valueOf(((int)startTimeMS / intervalValue));
    JMeterUtils.runSafe(new Runnable(){
      public void run(){
synchronized (lock) {
          if (startTimeInterval.intValue() < minStartTime) {
            minStartTime=startTimeInterval;
          }
 else           if (startTimeInterval > maxStartTime) {
            maxStartTime=startTimeInterval;
          }
          if (!seriesNames.containsKey(sampleLabel)) {
            seriesNames.put(sampleLabel,new RespTimeGraphLineBean(sampleLabel,listColors.get(colorIdx++)));
            if (colorIdx >= listColors.size()) {
              colorIdx=0;
            }
          }
          if (pList.containsKey(sampleLabel)) {
            Map<Integer,Long> subList=pList.get(sampleLabel);
            long respTime=sampleResult.getTime();
            Long value=subList.get(startTimeInterval);
            if (value != null) {
              respTime=(value + respTime) / 2;
            }
            subList.put(startTimeInterval,respTime);
          }
 else {
            Map<Integer,Long> newSubList=new LinkedHashMap<Integer,Long>();
            newSubList.put(startTimeInterval,sampleResult.getTime());
            pList.put(sampleLabel,newSubList);
          }
        }
      }
    }
);
  }
}
