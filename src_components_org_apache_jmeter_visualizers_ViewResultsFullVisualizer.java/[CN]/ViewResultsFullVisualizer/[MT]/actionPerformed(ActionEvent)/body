{
  String command=e.getActionCommand();
  if (command != null && (command.equals(TEXT_COMMAND) || command.equals(HTML_COMMAND))) {
    textMode=command.equals(TEXT_COMMAND);
    DefaultMutableTreeNode node=(DefaultMutableTreeNode)jTree.getLastSelectedPathComponent();
    if (node == null) {
      results.setText("");
      return;
    }
    SampleResult res=(SampleResult)node.getUserObject();
    byte[] responseBytes=(byte[])res.getResponseData();
    String response=null;
    if (res.getDataType() != null && res.getDataType().equals(SampleResult.TEXT)) {
      try {
        if (responseBytes.length > 200 * 1024) {
          response=("Response too large to be displayed (" + responseBytes.length + " bytes).");
          log.warn("Response too large to display.");
        }
 else {
          response=new String(responseBytes,"UTF-8");
        }
      }
 catch (      UnsupportedEncodingException err) {
        throw new Error(err.toString());
      }
    }
    if (textMode) {
      showTextResponse(response);
    }
 else {
      showRenderedResponse(response);
    }
  }
}
