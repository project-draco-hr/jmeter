{
  byte[] responseBytes=res.getResponseData();
  String response=null;
  if (res.getDataType() != null && res.getDataType().equals(SampleResult.TEXT)) {
    try {
      if (responseBytes.length > 200 * 1024) {
        response=("Response too large to be displayed (" + responseBytes.length + " bytes).");
        log.warn("Response too large to display.");
      }
 else {
        response=new String(responseBytes,res.getDataEncoding());
      }
    }
 catch (    UnsupportedEncodingException err) {
      log.warn("Could not decode response " + err);
      response=new String(responseBytes);
    }
  }
  return response;
}
