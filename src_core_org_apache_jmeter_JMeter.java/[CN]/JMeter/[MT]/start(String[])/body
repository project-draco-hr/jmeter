{
  CLArgsParser parser=new CLArgsParser(args,options);
  if (null != parser.getErrorString()) {
    System.err.println("Error: " + parser.getErrorString());
    System.out.println("Usage");
    System.out.println(CLUtil.describeOptions(options).toString());
    return;
  }
  try {
    initializeProperties(parser);
    setProxy(parser);
    log.info("Version " + JMeterUtils.getJMeterVersion());
    log.info("java.version=" + System.getProperty("java.version"));
    log.info("os.name=" + System.getProperty("os.name"));
    log.info("os.arch=" + System.getProperty("os.arch"));
    log.info("os.version=" + System.getProperty("os.version"));
    log.info("Default Locale=" + Locale.getDefault().getDisplayName());
    log.info("JMeter  Locale=" + JMeterUtils.getLocale().getDisplayName());
    log.info(JMeterUtils.getJMeterCopyright());
    log.info("JMeterHome=" + JMeterUtils.getJMeterHome());
    updateClassLoader();
    if (log.isDebugEnabled()) {
      String jcp=System.getProperty("java.class.path");
      log.debug(jcp);
    }
    if (parser.getArgumentById(VERSION_OPT) != null) {
      System.out.println(JMeterUtils.getJMeterCopyright());
      System.out.println("Version " + JMeterUtils.getJMeterVersion());
    }
 else     if (parser.getArgumentById(HELP_OPT) != null) {
      System.out.println(JMeterUtils.getResourceFileAsText("org/apache/jmeter/help.txt"));
    }
 else     if (parser.getArgumentById(SERVER_OPT) != null) {
      startServer(JMeterUtils.getPropDefault("server_port",0));
      startBSH();
    }
 else     if (parser.getArgumentById(NONGUI_OPT) == null) {
      startGui(parser.getArgumentById(TESTFILE_OPT));
      startBSH();
    }
 else {
      startNonGui(parser.getArgumentById(TESTFILE_OPT),parser.getArgumentById(LOGFILE_OPT),parser.getArgumentById(REMOTE_OPT));
      startBSH();
    }
  }
 catch (  IllegalUserActionException e) {
    System.out.println(e.getMessage());
    System.out.println("Incorrect Usage");
    System.out.println(CLUtil.describeOptions(options).toString());
  }
catch (  Exception e) {
    e.printStackTrace();
    System.out.println("An error occurred: " + e.getMessage());
    System.exit(-1);
  }
}
