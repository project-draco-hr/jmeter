{
  JMeterTreeModel treeModel=new JMeterTreeModel();
  JMeterTreeListener treeLis=new JMeterTreeListener(treeModel);
  treeLis.setActionHandler(ActionRouter.getInstance());
  GuiPackage guiPack=GuiPackage.getInstance(treeLis,treeModel);
  org.apache.jmeter.gui.MainFrame main=new org.apache.jmeter.gui.MainFrame(ActionRouter.getInstance(),treeModel,treeLis);
  main.setTitle("Apache JMeter");
  main.setIconImage(JMeterUtils.getImage("jmeter.jpg").getImage());
  ComponentUtil.centerComponentInWindow(main,80);
  main.show();
  ActionRouter.getInstance().actionPerformed(new ActionEvent(main,1,CheckDirty.ADD_ALL));
  if (testFile != null) {
    try {
      File f=new File(testFile.getArgument());
      FileInputStream reader=new FileInputStream(f);
      ListedHashTree tree=SaveService.loadSubTree(reader);
      new Load().insertLoadedTree(1,tree);
    }
 catch (    Exception e) {
      log.error("Failure loading test file",e);
    }
  }
}
