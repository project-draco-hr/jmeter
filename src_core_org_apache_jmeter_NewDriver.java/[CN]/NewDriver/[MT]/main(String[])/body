{
  Thread.currentThread().setContextClassLoader(loader);
  if (System.getProperty("log4j.configuration") == null) {
    File conf=new File(jmDir,"bin" + File.separator + "log4j.conf");
    System.setProperty("log4j.configuration","file:" + conf);
  }
  try {
    Class JMeter=loader.loadClass("org.apache.jmeter.JMeter");
    Object instance=JMeter.newInstance();
    Method startup=JMeter.getMethod("start",new Class[]{(new String[0]).getClass()});
    startup.invoke(instance,new Object[]{args});
  }
 catch (  Exception e) {
    e.printStackTrace();
  }
}
