{
  if (transactionSampler != null && transactionSampler.isTransactionDone()) {
    log.debug("End of transaction");
    transactionSampler=null;
    return null;
  }
  if (isFirst()) {
    log.debug("Start of transaction");
    transactionSampler=new TransactionSampler(this,getName());
  }
  Sampler subSampler=super.next();
  transactionSampler.setSubSampler(subSampler);
  if (subSampler == null) {
    transactionSampler.setTransactionDone();
  }
  return transactionSampler;
}
