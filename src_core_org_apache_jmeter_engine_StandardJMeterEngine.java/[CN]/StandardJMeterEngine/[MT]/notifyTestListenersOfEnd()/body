{
  log.info("Notifying test listeners of end of test");
  Iterator iter=testListeners.getSearchResults().iterator();
  while (iter.hasNext()) {
    TestListener tl=(TestListener)iter.next();
    if (tl instanceof TestBean)     TestBeanHelper.prepare((TestElement)tl);
    if (host == null) {
      tl.testEnded();
    }
 else {
      tl.testEnded(host);
    }
  }
  log.info("Test has ended");
  if (host != null) {
    long now=System.currentTimeMillis();
    System.out.println("Finished the test on host " + host + " @ "+ new Date(now)+ " ("+ now+ ")");
    if (exitAfterTest) {
      exit();
    }
  }
}
