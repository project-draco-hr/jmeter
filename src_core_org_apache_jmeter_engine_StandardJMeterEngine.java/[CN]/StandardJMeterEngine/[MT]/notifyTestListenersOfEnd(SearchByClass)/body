{
  log.info("Notifying test listeners of end of test",new Throwable());
  Iterator iter=testListeners.getSearchResults().iterator();
  while (iter.hasNext()) {
    TestListener tl=(TestListener)iter.next();
    try {
      if (host == null) {
        tl.testEnded();
      }
 else {
        tl.testEnded(host);
      }
    }
 catch (    Exception e) {
      log.warn("Error encountered during shutdown of " + tl.toString(),e);
    }
  }
  log.info("Test has ended");
  if (host != null) {
    long now=System.currentTimeMillis();
    System.out.println("Finished the test on host " + host + " @ "+ new Date(now)+ " ("+ now+ ")");
    if (exitAfterTest) {
      exit();
    }
  }
}
