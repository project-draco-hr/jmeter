{
  List<String> listClasses;
  Command command;
  Class<?> commandClass;
  try {
    listClasses=ClassFinder.findClassesThatExtend(JMeterUtils.getSearchPaths(),new Class[]{Class.forName("org.apache.jmeter.gui.action.Command")});
    commands=new HashMap<String,Set<Command>>(listClasses.size());
    if (listClasses.size() == 0) {
      log.fatalError("!!!!!Uh-oh, didn't find any action handlers!!!!!");
      throw new JMeterError("No action handlers found - check JMeterHome and libraries");
    }
    Iterator<String> iterClasses;
    iterClasses=listClasses.iterator();
    while (iterClasses.hasNext()) {
      String strClassName=iterClasses.next();
      if (strClassName.startsWith("org.apache.jmeter.gui")) {
        commandClass=Class.forName(strClassName);
        if (!Modifier.isAbstract(commandClass.getModifiers())) {
          command=(Command)commandClass.newInstance();
          Iterator<String> iter=command.getActionNames().iterator();
          while (iter.hasNext()) {
            String commandName=iter.next();
            Set<Command> commandObjects=commands.get(commandName);
            if (commandObjects == null) {
              commandObjects=new HashSet<Command>();
              commands.put(commandName,commandObjects);
            }
            commandObjects.add(command);
          }
        }
      }
    }
  }
 catch (  HeadlessException e) {
    log.warn(e.toString());
  }
catch (  JMeterError e) {
    throw e;
  }
catch (  Exception e) {
    log.error("exception finding action handlers",e);
  }
}
