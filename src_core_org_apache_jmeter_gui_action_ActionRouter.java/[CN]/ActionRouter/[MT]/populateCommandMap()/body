{
  try {
    List<String> listClasses=ClassFinder.findClassesThatExtend(JMeterUtils.getSearchPaths(),new Class[]{Class.forName("org.apache.jmeter.gui.action.Command")});
    commands=new HashMap<String,Set<Command>>(listClasses.size());
    if (listClasses.size() == 0) {
      log.fatalError("!!!!!Uh-oh, didn't find any action handlers!!!!!");
      throw new JMeterError("No action handlers found - check JMeterHome and libraries");
    }
    for (    String strClassName : listClasses) {
      if (strClassName.startsWith("org.apache.jmeter.gui")) {
        Class<?> commandClass=Class.forName(strClassName);
        if (!Modifier.isAbstract(commandClass.getModifiers())) {
          Command command=(Command)commandClass.newInstance();
          for (          String commandName : command.getActionNames()) {
            Set<Command> commandObjects=commands.get(commandName);
            if (commandObjects == null) {
              commandObjects=new HashSet<Command>();
              commands.put(commandName,commandObjects);
            }
            commandObjects.add(command);
          }
        }
      }
    }
  }
 catch (  HeadlessException e) {
    log.warn(e.toString());
  }
catch (  JMeterError e) {
    throw e;
  }
catch (  Exception e) {
    log.error("exception finding action handlers",e);
  }
}
