{
  try {
    if (getTestElement() instanceof TestBean) {
      try {
        Image img=Introspector.getBeanInfo(getTestElement().getClass()).getIcon(BeanInfo.ICON_COLOR_16x16);
        if (img == null) {
          Object clazz=Introspector.getBeanInfo(getTestElement().getClass()).getBeanDescriptor().getValue(TestElement.GUI_CLASS);
          if (clazz == null) {
            log.error("Can't obtain GUI class for " + getTestElement().getClass().getName());
            return null;
          }
          return GUIFactory.getIcon(Class.forName((String)clazz));
        }
        return new ImageIcon(img);
      }
 catch (      IntrospectionException e1) {
        log.error("Can't obtain icon",e1);
        throw new org.apache.jorphan.util.JMeterError(e1);
      }
    }
 else {
      return GUIFactory.getIcon(Class.forName(getTestElement().getPropertyAsString(TestElement.GUI_CLASS)));
    }
  }
 catch (  ClassNotFoundException e) {
    log.warn("Can't get icon for class " + getTestElement(),e);
    return null;
  }
}
