{
  String iconProp=JMeterUtils.getPropDefault(keyIconProp,defaultIconProp);
  Properties p=JMeterUtils.loadProperties(iconProp);
  if (p == null && !iconProp.equals(defaultIconProp)) {
    log.info(iconProp + " not found - using " + defaultIconProp);
    iconProp=defaultIconProp;
    p=JMeterUtils.loadProperties(defaultIconProp);
  }
  if (p == null) {
    JOptionPane.showMessageDialog(null,JMeterUtils.getResString("toolbar_icon_set_not_found"),JMeterUtils.getResString("toolbar_icon_set_not_found"),JOptionPane.WARNING_MESSAGE);
    return null;
  }
  log.info("Loading toolbar icons properties from " + iconProp);
  String order=p.getProperty("toolbar");
  p.remove("toolbar");
  String[] oList=order.split(",");
  LinkedHashMap<String,IconToolbarBean> listIcons=new LinkedHashMap<String,IconToolbarBean>();
  int ctr=1;
  for (  String key : oList) {
    log.debug("Toolbar icon key: " + key);
    if (key.trim().equals("|")) {
      listIcons.put("space" + ctr++,null);
    }
 else {
      try {
        IconToolbarBean itb=new IconToolbarBean(p.getProperty(key));
        listIcons.put(key,itb);
      }
 catch (      JMeterException je) {
        log.error("Toolbar icon loading error - key: " + key);
      }
    }
  }
  return listIcons;
}
