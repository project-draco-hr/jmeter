{
  if (args.length < 1) {
    System.out.println("Need an argument specifying the jmeter property file");
    System.exit(0);
  }
  JMeterUtils.getProperties(args[0]);
  JMeterUtils.setJMeterHome(new File(System.getProperty("user.dir")).getParent());
  if (System.getProperty("log4j.configuration") == null) {
    File conf=new File(JMeterUtils.getJMeterHome(),"bin" + File.separator + "log4j.conf");
    System.setProperty("log4j.configuration","file:" + conf);
  }
  try {
    TestSuite suite=suite();
    PrintStream out=new PrintStream(new FileOutputStream("testresults.txt"));
    junit.textui.TestRunner runner=new junit.textui.TestRunner(out);
    runner.run(suite);
    out.close();
  }
 catch (  FileNotFoundException e) {
    e.printStackTrace();
  }
  System.exit(0);
}
