{
  SampleResult result=event.getResult();
  if (!isErrorLogging() || !result.isSuccessful()) {
    sendToVisualizer(result);
    if (out != null) {
      SampleSaveConfiguration config=getSaveConfig();
      result.setSaveConfig(config);
      try {
        if (config.saveAsXml()) {
          recordResult(event);
        }
 else {
          String savee=CSVSaveService.resultToDelimitedString(event);
          out.println(savee);
        }
      }
 catch (      Exception err) {
        log.error("Error trying to record a sample",err);
      }
    }
  }
}
