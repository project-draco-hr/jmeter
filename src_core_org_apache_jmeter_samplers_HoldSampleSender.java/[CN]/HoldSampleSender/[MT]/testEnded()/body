{
  log.debug("Test ended()");
  try {
synchronized (sampleStore) {
      for (      SampleEvent se : sampleStore) {
        listener.sampleOccurred(se);
      }
    }
    listener.testEnded();
    sampleStore.clear();
  }
 catch (  Throwable ex) {
    log.warn("testEnded()",ex);
    if (ex instanceof Error) {
      throw (Error)ex;
    }
    if (ex instanceof RuntimeException) {
      throw (RuntimeException)ex;
    }
  }
}
