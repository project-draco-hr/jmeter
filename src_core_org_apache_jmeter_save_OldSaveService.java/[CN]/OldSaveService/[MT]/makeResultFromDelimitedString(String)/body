{
  SampleResult result=null;
  long timeStamp=0;
  long elapsed=0;
  StringTokenizer splitter=new StringTokenizer(delim,_saveConfig.getDelimiter());
  String text=null;
  try {
    if (_saveConfig.printMilliseconds()) {
      text=splitter.nextToken();
      timeStamp=Long.parseLong(text);
    }
 else     if (_saveConfig.formatter() != null) {
      text=splitter.nextToken();
      Date stamp=_saveConfig.formatter().parse(text);
      timeStamp=stamp.getTime();
    }
    if (_saveConfig.saveTime()) {
      text=splitter.nextToken();
      elapsed=Long.parseLong(text);
    }
    result=new SampleResult(timeStamp,elapsed);
    if (_saveConfig.saveLabel()) {
      text=splitter.nextToken();
      result.setSampleLabel(text);
    }
    if (_saveConfig.saveCode()) {
      text=splitter.nextToken();
      result.setResponseCode(text);
    }
    if (_saveConfig.saveMessage()) {
      text=splitter.nextToken();
      result.setResponseMessage(text);
    }
    if (_saveConfig.saveThreadName()) {
      text=splitter.nextToken();
      result.setThreadName(text);
    }
    if (_saveConfig.saveDataType()) {
      text=splitter.nextToken();
      result.setDataType(text);
    }
    if (_saveConfig.saveSuccess()) {
      text=splitter.nextToken();
      result.setSuccessful(Boolean.valueOf(text).booleanValue());
    }
    if (_saveConfig.saveAssertionResultsFailureMessage()) {
      text=splitter.nextToken();
    }
  }
 catch (  NumberFormatException e) {
    log.warn("Error parsing number " + e);
    throw e;
  }
catch (  ParseException e) {
    log.warn("Error parsing line " + e);
    throw new RuntimeException(e.toString());
  }
  return result;
}
