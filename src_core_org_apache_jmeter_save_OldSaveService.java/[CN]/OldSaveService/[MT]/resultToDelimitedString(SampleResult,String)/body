{
  StringBuffer text=new StringBuffer();
  SampleSaveConfiguration saveConfig=sample.getSaveConfig();
  if (saveConfig.saveTimestamp()) {
    text.append(sample.getTimeStamp());
    text.append(delimiter);
  }
 else   if (saveConfig.formatter() != null) {
    String stamp=saveConfig.formatter().format(new Date(sample.getTimeStamp()));
    text.append(stamp);
    text.append(delimiter);
  }
  if (saveConfig.saveTime()) {
    text.append(sample.getTime());
    text.append(delimiter);
  }
  if (saveConfig.saveContentLength()) {
    text.append(sample.getContentLength());
    text.append(delimiter);
  }
  if (saveConfig.saveLabel()) {
    text.append(sample.getSampleLabel());
    text.append(delimiter);
  }
  if (saveConfig.saveCode()) {
    text.append(sample.getResponseCode());
    text.append(delimiter);
  }
  if (saveConfig.saveMessage()) {
    text.append(sample.getResponseMessage());
    text.append(delimiter);
  }
  if (saveConfig.saveThreadName()) {
    text.append(sample.getThreadName());
    text.append(delimiter);
  }
  if (saveConfig.saveDataType()) {
    text.append(sample.getDataType());
    text.append(delimiter);
  }
  if (saveConfig.saveSuccess()) {
    text.append(sample.isSuccessful());
    text.append(delimiter);
  }
  if (saveConfig.saveAssertionResultsFailureMessage()) {
    String message=null;
    AssertionResult[] results=sample.getAssertionResults();
    if ((results != null) && (results.length > 0)) {
      message=results[0].getFailureMessage();
    }
    if (message != null) {
      text.append(message);
    }
    text.append(delimiter);
  }
  String resultString=null;
  int size=text.length();
  int delSize=delimiter.length();
  if (size >= delSize) {
    resultString=text.substring(0,size - delSize);
  }
 else {
    resultString=text.toString();
  }
  return resultString;
}
