{
  Dimension size=component.getSize();
  BufferedImage image=new BufferedImage(size.width,size.height,BufferedImage.TYPE_INT_RGB);
  Graphics2D grp=image.createGraphics();
  component.setBackground(Color.white);
  component.paint(grp);
  File outfile=new File(filename);
  FileOutputStream fos=createFile(outfile);
  ImageEncoder encoder=ImageCodec.createImageEncoder("PNG",fos,null);
  PNGEncodeParam param=new PNGEncodeParam.RGB();
  encoder.setParam(param);
  try {
    encoder.encode(image);
  }
 catch (  Exception e) {
    e.printStackTrace();
  }
}
