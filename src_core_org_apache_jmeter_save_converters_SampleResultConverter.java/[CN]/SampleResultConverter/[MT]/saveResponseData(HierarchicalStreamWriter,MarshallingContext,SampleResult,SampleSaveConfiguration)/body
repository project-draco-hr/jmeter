{
  if (save.saveResponseData(res)) {
    writer.startNode(TAG_RESPONSE_DATA);
    try {
      String ct=res.getContentType();
      if (ct.startsWith("text/")) {
        writer.addAttribute(ATT_CLASS,JAVA_LANG_STRING);
        writer.setValue(new String(res.getResponseData(),res.getDataEncoding()));
      }
 else {
        writer.addAttribute(ATT_CLASS,JAVA_LANG_STRING);
        writer.setValue(res.getURL().toExternalForm());
      }
    }
 catch (    UnsupportedEncodingException e) {
      writer.setValue("Unsupported encoding in response data, can't record.");
    }
    writer.endNode();
  }
}
