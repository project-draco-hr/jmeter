{
  String[] editorTags=typeEditor.getTags();
  String[] additionalTags=(String[])descriptor.getValue(TAGS);
  String[] tags=null;
  if (editorTags == null) {
    tags=additionalTags;
  }
 else   if (additionalTags == null) {
    tags=editorTags;
  }
 else {
    tags=new String[editorTags.length + additionalTags.length];
    int j=0;
    for (int i=0; i < editorTags.length; i++) {
      tags[j++]=editorTags[i];
    }
    for (int i=0; i < additionalTags.length; i++) {
      tags[j++]=additionalTags[i];
    }
  }
  boolean notNull=notNull(descriptor);
  boolean notExpression=notExpression(descriptor);
  boolean notOther=notOther(descriptor);
  PropertyEditor guiEditor;
  Object guiType=descriptor.getValue(GUITYPE);
  if (guiType instanceof GuiEditor) {
    guiEditor=((GuiEditor)guiType).getInstance(descriptor);
  }
 else {
    if (notNull && tags == null) {
      guiEditor=new FieldStringEditor();
    }
 else {
      ComboStringEditor e=new ComboStringEditor();
      e.setNoUndefined(notNull);
      e.setNoEdit(notExpression && notOther);
      e.setTags(tags);
      guiEditor=e;
    }
  }
  WrapperEditor wrapper=new WrapperEditor(typeEditor,guiEditor,!notNull,!notExpression,!notOther,descriptor.getValue(DEFAULT));
  return wrapper;
}
