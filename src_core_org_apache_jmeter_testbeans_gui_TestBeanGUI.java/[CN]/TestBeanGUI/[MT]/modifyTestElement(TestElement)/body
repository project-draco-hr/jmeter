{
  if (customizer instanceof GenericTestBeanCustomizer) {
    GenericTestBeanCustomizer gtbc=(GenericTestBeanCustomizer)customizer;
    gtbc.saveGuiFields();
  }
  configureTestElement(element);
  PropertyDescriptor[] props=beanInfo.getPropertyDescriptors();
  for (int i=0; i < props.length; i++) {
    String name=props[i].getName();
    Object value=propertyMap.get(name);
    log.debug("Modify " + name + " to "+ value);
    if (value == null) {
      Object valueNotUnDefined=props[i].getValue(GenericTestBeanCustomizer.NOT_UNDEFINED);
      if (valueNotUnDefined != null && ((Boolean)valueNotUnDefined).booleanValue()) {
        setPropertyInElement(element,name,props[i].getValue(BeanInfoSupport.DEFAULT));
      }
 else {
        element.removeProperty(name);
      }
    }
 else {
      setPropertyInElement(element,name,propertyMap.get(name));
    }
  }
}
