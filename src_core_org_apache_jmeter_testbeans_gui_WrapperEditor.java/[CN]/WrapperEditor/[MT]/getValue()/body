{
  String text=(String)guiEditor.getValue();
  Object value;
  if (text == null) {
    if (!acceptsNull) {
      shouldNeverHappen("Text is null but null is not allowed");
    }
    value=null;
  }
 else {
    if (acceptsExpressions && isExpression(text)) {
      value=text;
    }
 else {
      if (!acceptsOther && !isATag(text)) {
        shouldNeverHappen("Text is not a tag but other entries are not allowed");
      }
      try {
        if (text.length() == 0 && typeEditor instanceof NumberEditor) {
          text="0";
        }
        typeEditor.setAsText(text);
      }
 catch (      IllegalArgumentException e) {
        shouldNeverHappen(e);
      }
      value=typeEditor.getValue();
    }
  }
  if (log.isDebugEnabled()) {
    log.debug("->" + (value != null ? value.getClass().getName() : "NULL") + ":"+ value);
  }
  return value;
}
