{
  Iterator iter=assertions.iterator();
  while (iter.hasNext()) {
    Assertion assertion=(Assertion)iter.next();
    TestBeanHelper.prepare((TestElement)assertion);
    AssertionResult assertionResult=assertion.getResult(result);
    result.setSuccessful(result.isSuccessful() && !(assertionResult.isError() || assertionResult.isFailure()));
    result.addAssertionResult(assertionResult);
  }
  threadContext.getVariables().put(LAST_SAMPLE_OK,Boolean.toString(result.isSuccessful()));
}
