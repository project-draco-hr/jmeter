{
  SampleEvent event=null;
  while (true) {
    try {
      event=(SampleEvent)occurredQ.remove(0);
    }
 catch (    Exception ex) {
      log.warn("Problem removing an item from the queue",ex);
    }
    try {
      if (event != null) {
        Iterator iter=listeners.iterator();
        while (iter.hasNext()) {
          ((SampleListener)iter.next()).sampleOccurred(event);
        }
        iter=remoteListeners.iterator();
        while (iter.hasNext()) {
          try {
            ((RemoteSampleListener)iter.next()).sampleOccurred(event);
          }
 catch (          Exception ex) {
            log.error("Could not invoke sampleOccured on remote listener",ex);
          }
        }
      }
 else {
        try {
          this.wait();
        }
 catch (        Exception ex) {
          log.warn("Error occured during wait",ex);
        }
      }
    }
 catch (    Throwable ex) {
      log.error("",ex);
    }
  }
}
