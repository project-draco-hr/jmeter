{
  if (isDelayedStartup()) {
    delayedStartup=true;
    thread.setInitialDelay(0);
  }
 else {
    int rampUp=getRampUp();
    float perThreadDelay=((float)(rampUp * 1000) / (float)getNumThreads());
    thread.setInitialDelay((int)(perThreadDelay * thread.getThreadNum()));
  }
  if (getScheduler()) {
    long now=System.currentTimeMillis();
    if (getDelay() > 0) {
      thread.setStartTime(getDelay() * 1000 + now);
    }
 else {
      long start=getStartTime();
      if (start < now) {
        start=now;
      }
      thread.setStartTime(start);
    }
    if (getDuration() > 0) {
      thread.setEndTime(getDuration() * 1000 + (thread.getStartTime()));
    }
 else {
      thread.setEndTime(getEndTime());
    }
    thread.setScheduled(true);
  }
}
