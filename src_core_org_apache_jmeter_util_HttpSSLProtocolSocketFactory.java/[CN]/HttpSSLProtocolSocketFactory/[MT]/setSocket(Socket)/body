{
  if (protocols.length <= 0)   return;
  if (sock instanceof SSLSocket) {
    try {
      ((SSLSocket)sock).setEnabledProtocols(protocols);
    }
 catch (    IllegalArgumentException e) {
      log.warn("Could not set protocol list: " + protocolList);
      log.warn("Valid protocols are: " + join(((SSLSocket)sock).getSupportedProtocols()));
    }
  }
 else {
    throw new IllegalArgumentException("Expecting only SSL socket; found " + sock.getClass().getName());
  }
}
