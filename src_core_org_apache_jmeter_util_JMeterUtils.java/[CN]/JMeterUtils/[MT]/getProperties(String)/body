{
  Properties p=new Properties(System.getProperties());
  try {
    File f=new File(file);
    p.load(new FileInputStream(f));
  }
 catch (  Exception e) {
    try {
      p.load(JMeterUtils.class.getClassLoader().getSystemResourceAsStream("org/apache/jmeter/jmeter.properties"));
    }
 catch (    IOException ex) {
    }
  }
  appProperties=p;
  logManager=new LoggingManager();
  try {
    logManager.setTarget(new PrintWriter(new FileWriter(getPropDefault(LOG_FILE,"jmeter.log"))));
  }
 catch (  IOException e) {
    System.out.println("bad log file");
  }
  logManager.setPriority(Priority.getPriorityForName(getPropDefault(LOG_PRIORITY,"WARN")),"jmeter");
  setLoggingLevels();
  return p;
}
