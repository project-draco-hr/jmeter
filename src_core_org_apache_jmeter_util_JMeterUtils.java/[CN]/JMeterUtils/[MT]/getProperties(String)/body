{
  Properties p=new Properties(System.getProperties());
  try {
    File f=new File(file);
    p.load(new FileInputStream(f));
  }
 catch (  Exception e) {
    try {
      p.load(ClassLoader.getSystemResourceAsStream("org/apache/jmeter/jmeter.properties"));
    }
 catch (    IOException ex) {
    }
  }
  appProperties=p;
  LoggingManager.initializeLogging(appProperties);
  log=LoggingManager.getLoggerForClass();
  String loc=appProperties.getProperty("language");
  if (loc != null) {
    setLocale(new Locale(loc,""));
  }
 else {
    setLocale(Locale.getDefault());
  }
  return p;
}
