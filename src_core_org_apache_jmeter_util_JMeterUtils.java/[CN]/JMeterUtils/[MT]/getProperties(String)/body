{
  Properties p=new Properties(System.getProperties());
  try {
    File f=new File(file);
    p.load(new FileInputStream(f));
  }
 catch (  IOException e) {
    try {
      InputStream is=ClassLoader.getSystemResourceAsStream("org/apache/jmeter/jmeter.properties");
      if (is == null)       throw new RuntimeException("Could not read JMeter properties file");
      p.load(is);
    }
 catch (    IOException ex) {
    }
  }
  appProperties=p;
  LoggingManager.initializeLogging(appProperties);
  log=LoggingManager.getLoggerForClass();
  String loc=appProperties.getProperty("language");
  if (loc != null) {
    setLocale(new Locale(loc,""));
  }
 else {
    setLocale(Locale.getDefault());
  }
  return p;
}
