{
  if (null == this.trustStore) {
    String fileName=JMeterUtils.getPropDefault("javax.net.ssl.trustStore","");
    System.setProperty("javax.net.ssl.trustStore",fileName);
    try {
      if (fileName.endsWith(".iaik")) {
        this.trustStore=KeyStore.getInstance("IAIKKeyStore","IAIK");
      }
 else {
        this.trustStore=KeyStore.getInstance("JKS");
        System.out.println("KeyStore Type: JKS");
      }
    }
 catch (    Exception e) {
      JOptionPane.showMessageDialog(GuiPackage.getInstance().getMainFrame(),e,JMeterUtils.getResString("ssl_error_title"),JOptionPane.ERROR_MESSAGE);
      this.trustStore=null;
      throw new RuntimeException("TrustStore Problem");
    }
    try {
      File initStore=new File(fileName);
      if (initStore.exists()) {
        try {
          this.trustStore.load(new FileInputStream(initStore),null);
        }
 catch (        Exception e) {
          throw new RuntimeException("Can't load KeyStore!!!  " + e.getMessage());
        }
      }
 else {
        this.trustStore.load(null,null);
      }
    }
 catch (    Exception e) {
    }
    System.out.println("TrustStore Location: " + fileName);
    System.out.println("TrustStore type: " + this.keyStore.getClass().toString());
  }
  return this.trustStore;
}
