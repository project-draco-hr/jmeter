{
  JMeterVariables vars=getVariables();
  int sum=0;
  String varName=((CompoundVariable)values[values.length - 1]).execute();
  for (int i=0; i < values.length - 1; i++) {
    sum+=Integer.parseInt(((CompoundVariable)values[i]).execute());
  }
  try {
    if (StringUtils.isNumeric(varName)) {
      sum+=Integer.parseInt(varName);
      varName=null;
    }
  }
 catch (  NumberFormatException ignored) {
    if (log.isDebugEnabled()) {
      if (StringUtils.isNumeric(varName)) {
        log.debug("Exception parsing " + varName + " as int, value will be considered a variable name and not included in sum");
      }
    }
  }
  String totalString=Integer.toString(sum);
  if (vars != null && varName != null) {
    vars.put(varName.trim(),totalString);
  }
  return totalString;
}
