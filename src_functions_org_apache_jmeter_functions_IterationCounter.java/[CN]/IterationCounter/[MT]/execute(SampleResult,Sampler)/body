{
  counter[0]++;
  JMeterVariables vars=getVariables();
  boolean perThread=Boolean.valueOf(((CompoundVariable)variables[0]).execute()).booleanValue();
  String varName=((CompoundVariable)variables[variables.length - 1]).execute();
  String counterString="";
  if (perThread) {
    counterString=Integer.toString(vars.getIteration());
  }
 else {
    counterString=String.valueOf(counter[0]);
  }
  vars.put(varName,counterString);
  return counterString;
}
