{
  String res;
  NodeReader rd;
  String chs;
  URLConnection con;
  if (null != connection) {
    res=getURL();
    rd=getReader();
    chs=getEncoding();
    con=getConnection();
    try {
      resourceLocn=connection.getURL().toExternalForm();
      url_conn=connection;
      url_conn.connect();
      character_set=getCharacterSet(url_conn);
      createReader();
    }
 catch (    IOException ioe) {
      String msg="setConnection() : Error in opening a connection to " + connection.getURL().toExternalForm();
      ParserException ex=new ParserException(msg,ioe);
      feedback.error(msg,ex);
      resourceLocn=res;
      url_conn=con;
      character_set=chs;
      reader=rd;
      throw ex;
    }
  }
}
