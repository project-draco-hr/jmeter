{
  ArrayList listPaths=null;
  StringTokenizer stPaths=null;
  String strPath=null;
  int i;
  listPaths=new ArrayList();
  log.debug("Classpath = " + System.getProperty("java.class.path"));
  stPaths=new StringTokenizer(System.getProperty("java.class.path"),System.getProperty("path.separator"));
  if (strPathsOrJars != null) {
    strPathsOrJars=fixDotDirs(strPathsOrJars);
    strPathsOrJars=fixSlashes(strPathsOrJars);
    strPathsOrJars=fixEndingSlashes(strPathsOrJars);
  }
  if (log.isDebugEnabled()) {
    for (i=0; i < strPathsOrJars.length; i++) {
      log.debug("strPathsOrJars[" + i + "] : "+ strPathsOrJars[i]);
    }
  }
  while (stPaths.hasMoreTokens()) {
    strPath=fixDotDir((String)stPaths.nextToken());
    strPath=fixSlashes(strPath);
    strPath=fixEndingSlashes(strPath);
    if (strPathsOrJars == null) {
      log.debug("Adding: " + strPath);
      listPaths.add(strPath);
    }
 else {
      boolean found=false;
      for (i=0; i < strPathsOrJars.length; i++) {
        if (strPath.endsWith(strPathsOrJars[i])) {
          found=true;
          log.debug("Adding " + strPath + " found at "+ i);
          listPaths.add(strPath);
          break;
        }
      }
      if (!found) {
        log.debug("Did not find: " + strPath);
      }
    }
  }
  return listPaths;
}
