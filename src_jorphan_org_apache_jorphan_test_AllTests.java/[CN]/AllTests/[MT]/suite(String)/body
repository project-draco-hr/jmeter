{
  TestSuite suite=new TestSuite();
  try {
    Iterator classes=ClassFinder.findClassesThatExtend(JOrphanUtils.split(searchPaths,","),new Class[]{TestCase.class},true).iterator();
    while (classes.hasNext()) {
      String name=(String)classes.next();
      try {
        Class clazz=Class.forName(name);
        TestSuite t=null;
        try {
          Method m=clazz.getMethod("suite",new Class[0]);
          t=(TestSuite)m.invoke(clazz,null);
        }
 catch (        NoSuchMethodException e) {
        }
        if (t == null) {
          t=new TestSuite(clazz);
        }
        suite.addTest(t);
      }
 catch (      Exception ex) {
        System.out.println("Error adding test for class " + name + " "+ ex.toString());
        log.error("error adding test :",ex);
      }
    }
  }
 catch (  IOException e) {
    log.error("",e);
  }
catch (  ClassNotFoundException e) {
    log.error("",e);
  }
  return suite;
}
