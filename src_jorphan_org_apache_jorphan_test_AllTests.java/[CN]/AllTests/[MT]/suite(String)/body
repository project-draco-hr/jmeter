{
  TestSuite suite=new TestSuite();
  try {
    Iterator classes=ClassFinder.findClassesThatExtend(JOrphanUtils.split(searchPaths,","),new Class[]{TestCase.class},true).iterator();
    while (classes.hasNext()) {
      String name=(String)classes.next();
      try {
        Class clazz=Class.forName(name);
        try {
          Method m=clazz.getMethod("suite",new Class[0]);
          TestSuite t=(TestSuite)m.invoke(clazz,null);
          suite.addTest(t);
        }
 catch (        Exception e) {
          TestSuite ts=new TestSuite(clazz);
          suite.addTest(ts);
        }
      }
 catch (      Exception ex) {
        System.out.println("Error adding test for class " + name + " "+ ex.toString());
        log.error("error adding test :" + ex);
      }
    }
  }
 catch (  IOException e) {
    log.error("",e);
  }
catch (  ClassNotFoundException e) {
    log.error("",e);
  }
  return suite;
}
