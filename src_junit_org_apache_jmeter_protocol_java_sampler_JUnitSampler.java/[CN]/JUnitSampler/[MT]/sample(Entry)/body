{
  SampleResult sresult=new SampleResult();
  String rlabel=null;
  if (getConstructorString().length() > 0) {
    rlabel=getConstructorString();
  }
 else {
    rlabel=JUnitSampler.class.getName();
  }
  sresult.setSampleLabel(rlabel);
  sresult.setSamplerData(getClassname() + "." + getMethod());
  if (this.TEST_INSTANCE == null) {
    this.TEST_INSTANCE=(TestCase)getClassInstance(getClassname(),rlabel);
  }
  if (this.TEST_INSTANCE != null) {
    initMethodObjects(this.TEST_INSTANCE);
    TestResult tr=new TestResult();
    this.TEST_INSTANCE.setName(getMethod());
    try {
      if (!getDoNotSetUpTearDown() && SETUP_METHOD != null) {
        SETUP_METHOD.invoke(this.TEST_INSTANCE,new Class[0]);
      }
      if (RUN_METHOD == null) {
        RUN_METHOD=getRunTestMethod(this.TEST_INSTANCE);
      }
      Method m=getMethod(this.TEST_INSTANCE,getMethod());
      sresult.sampleStart();
      if (RUN_METHOD != null) {
        Object[] p={tr};
        RUN_METHOD.invoke(this.TEST_INSTANCE,p);
      }
 else {
        m.invoke(this.TEST_INSTANCE,new Class[0]);
      }
      sresult.sampleEnd();
      if (!getDoNotSetUpTearDown() && TDOWN_METHOD != null) {
        TDOWN_METHOD.invoke(TEST_INSTANCE,new Class[0]);
      }
    }
 catch (    InvocationTargetException e) {
      sresult.setResponseCode(getErrorCode());
      sresult.setResponseMessage(getError());
      sresult.setResponseData(e.getMessage().getBytes());
      sresult.setSuccessful(false);
    }
catch (    IllegalAccessException e) {
      sresult.setResponseCode(getErrorCode());
      sresult.setResponseMessage(getError());
      sresult.setResponseData(e.getMessage().getBytes());
      sresult.setSuccessful(false);
    }
catch (    ComparisonFailure e) {
      sresult.setResponseCode(getErrorCode());
      sresult.setResponseMessage(getError());
      sresult.setResponseData(e.getMessage().getBytes());
      sresult.setSuccessful(false);
    }
catch (    IllegalArgumentException e) {
      sresult.setResponseCode(getErrorCode());
      sresult.setResponseMessage(getError());
      sresult.setResponseData(e.getMessage().getBytes());
      sresult.setSuccessful(false);
    }
catch (    Exception e) {
      sresult.setResponseCode(getErrorCode());
      sresult.setResponseMessage(getError());
      sresult.setResponseData(e.getMessage().getBytes());
      sresult.setSuccessful(false);
    }
catch (    Throwable e) {
      sresult.setResponseCode(getErrorCode());
      sresult.setResponseMessage(getError());
      sresult.setResponseData(e.getMessage().getBytes());
      sresult.setSuccessful(false);
    }
    if (!tr.wasSuccessful()) {
      sresult.setSuccessful(false);
      StringBuffer buf=new StringBuffer();
      buf.append(getFailure());
      Enumeration en=tr.errors();
      while (en.hasMoreElements()) {
        buf.append((String)en.nextElement());
      }
      sresult.setResponseMessage(buf.toString());
      sresult.setResponseCode(getFailureCode());
    }
 else {
      sresult.setSuccessful(true);
      sresult.setResponseMessage(getSuccess());
      sresult.setResponseCode(getSuccessCode());
    }
  }
 else {
    sresult.setSuccessful(false);
    sresult.setResponseMessage("failed to create an instance of the class");
  }
  return sresult;
}
