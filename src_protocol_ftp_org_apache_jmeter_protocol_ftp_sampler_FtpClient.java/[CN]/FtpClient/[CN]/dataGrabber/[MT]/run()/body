{
  try {
    if (passive) {
      sock=new Socket(host,dgPort);
    }
 else {
      log.info("creating socket on " + dgPort);
      ServerSocket server=new ServerSocket(dgPort);
      log.info("accepting...");
      portCreated=true;
      sock=server.accept();
      log.info("accepted");
    }
  }
 catch (  Exception e) {
  }
  try {
    InputStream inStr=sock.getInputStream();
    BufferedInputStream dataIn=new BufferedInputStream(inStr);
    int bufferSize=4096;
    byte[] inputBuffer=new byte[bufferSize];
    int i=0;
    while ((i=dataIn.read(inputBuffer,0,bufferSize)) != -1) {
      buffer.append((char)i);
    }
    dataIn.close();
    sock.close();
  }
 catch (  Exception e) {
    log.error("FTP client: dataGrabber",e);
  }
  done=true;
}
