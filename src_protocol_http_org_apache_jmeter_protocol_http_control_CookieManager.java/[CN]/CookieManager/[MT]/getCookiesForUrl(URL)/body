{
  CollectionProperty jar=getCookies();
  org.apache.commons.httpclient.Cookie cookies[]=new org.apache.commons.httpclient.Cookie[jar.size()];
  int i=0;
  for (PropertyIterator iter=getCookies().iterator(); iter.hasNext(); ) {
    Cookie jmcookie=(Cookie)iter.next().getObjectValue();
    if (ALLOW_VARIABLE_COOKIES)     jmcookie.setRunningVersion(true);
    cookies[i++]=makeCookie(jmcookie);
    if (ALLOW_VARIABLE_COOKIES)     jmcookie.setRunningVersion(false);
  }
  String host=url.getHost();
  String protocol=url.getProtocol();
  int port=HTTPSamplerBase.getDefaultPort(protocol,url.getPort());
  String path=url.getPath();
  boolean secure=HTTPSamplerBase.isSecure(protocol);
  return cookieSpec.match(host,port,path,secure,cookies);
}
