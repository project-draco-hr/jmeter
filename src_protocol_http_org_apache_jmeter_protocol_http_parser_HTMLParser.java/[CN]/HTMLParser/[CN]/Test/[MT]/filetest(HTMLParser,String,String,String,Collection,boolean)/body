{
  log.debug("file   " + file);
  File f=findTestFile(file);
  byte[] buffer=new byte[(int)f.length()];
  int len=new FileInputStream(f).read(buffer);
  assertEquals(len,buffer.length);
  Iterator result;
  if (c == null) {
    result=p.getEmbeddedResourceURLs(buffer,new URL(url));
  }
 else {
    result=p.getEmbeddedResourceURLs(buffer,new URL(url),c);
  }
  Iterator expected;
  if (orderMatters) {
    expected=getFile(resultFile).iterator();
  }
 else {
    expected=new TreeSet(getFile(resultFile)).iterator();
    TreeSet temp=new TreeSet();
    while (result.hasNext()) {
      temp.add(result.next().toString());
    }
    result=temp.iterator();
  }
  while (expected.hasNext()) {
    assertTrue("Expecting another result",result.hasNext());
    assertEquals(expected.next(),result.next().toString());
  }
  assertFalse("Should have reached the end of the results",result.hasNext());
}
