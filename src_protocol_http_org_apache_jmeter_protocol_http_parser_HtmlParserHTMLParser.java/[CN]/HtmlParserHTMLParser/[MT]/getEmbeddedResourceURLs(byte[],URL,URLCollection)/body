{
  if (log.isDebugEnabled())   log.debug("Parsing html of: " + baseUrl);
  Parser htmlParser=null;
  try {
    String contents=new String(html);
    StringReader reader=new StringReader(contents);
    NodeReader nreader=new NodeReader(reader,contents.length());
    htmlParser=new Parser(nreader,new DefaultParserFeedback());
    addTagListeners(htmlParser);
  }
 catch (  Exception e) {
    throw new HTMLParseException(e);
  }
  try {
    for (NodeIterator e=htmlParser.elements(); e.hasMoreNodes(); ) {
      Node node=e.nextNode();
      String binUrlStr=null;
      if (node instanceof BodyTag) {
        BodyTag body=(BodyTag)node;
        binUrlStr=body.getAttribute(ATT_BACKGROUND);
        e=body.elements();
      }
 else       if (node instanceof BaseHrefTag) {
        BaseHrefTag baseHref=(BaseHrefTag)node;
        String baseref=baseHref.getBaseUrl();
        try {
          if (!baseref.equals("")) {
            baseUrl=new URL(baseUrl,baseref);
          }
        }
 catch (        MalformedURLException e1) {
          throw new HTMLParseException(e1);
        }
      }
 else       if (node instanceof ImageTag) {
        ImageTag image=(ImageTag)node;
        binUrlStr=image.getImageURL();
      }
 else       if (node instanceof AppletTag) {
        AppletTag applet=(AppletTag)node;
        binUrlStr=applet.getAppletClass();
      }
 else       if (node instanceof InputTag) {
        InputTag input=(InputTag)node;
        String strType=input.getAttribute(ATT_TYPE);
        if (ATT_IS_IMAGE.equalsIgnoreCase(strType)) {
          binUrlStr=input.getAttribute(ATT_SRC);
        }
      }
 else       if (node instanceof LinkTag) {
        LinkTag link=(LinkTag)node;
        if (link.getChild(0) instanceof ImageTag) {
          ImageTag img=(ImageTag)link.getChild(0);
          binUrlStr=img.getImageURL();
        }
      }
 else       if (node instanceof ScriptTag) {
        ScriptTag script=(ScriptTag)node;
        binUrlStr=script.getAttribute(ATT_SRC);
      }
 else       if (node instanceof FrameTag) {
        FrameTag tag=(FrameTag)node;
        binUrlStr=tag.getAttribute(ATT_SRC);
      }
 else       if (node instanceof LinkTagTag) {
        LinkTagTag script=(LinkTagTag)node;
        if (STYLESHEET.equalsIgnoreCase(script.getAttribute(ATT_REL))) {
          binUrlStr=script.getAttribute(ATT_HREF);
        }
      }
 else       if (node instanceof FrameTag) {
        FrameTag script=(FrameTag)node;
        binUrlStr=script.getAttribute(ATT_SRC);
      }
 else       if (node instanceof BgSoundTag) {
        BgSoundTag script=(BgSoundTag)node;
        binUrlStr=script.getAttribute(ATT_SRC);
      }
 else       if (node instanceof Tag) {
        Tag tag=(Tag)node;
        String tagname=tag.getTagName();
        if (tagname.equalsIgnoreCase(TAG_EMBED)) {
          binUrlStr=tag.getAttribute(ATT_SRC);
        }
 else {
          binUrlStr=tag.getAttribute(ATT_BACKGROUND);
        }
      }
      if (binUrlStr == null) {
        continue;
      }
      urls.addURL(binUrlStr,baseUrl);
    }
    log.debug("End   : parseNodes");
  }
 catch (  ParserException e) {
    throw new HTMLParseException(e);
  }
  return urls.iterator();
}
