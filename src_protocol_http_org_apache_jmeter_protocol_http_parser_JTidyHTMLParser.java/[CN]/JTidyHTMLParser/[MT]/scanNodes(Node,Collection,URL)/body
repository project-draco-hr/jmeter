{
  if (node == null) {
    return;
  }
  String name=node.getNodeName();
  int type=node.getNodeType();
switch (type) {
case Node.DOCUMENT_NODE:
    scanNodes(((Document)node).getDocumentElement(),urls,baseUrl);
  break;
case Node.ELEMENT_NODE:
NamedNodeMap attrs=node.getAttributes();
if (name.equalsIgnoreCase("base")) {
String tmp=getValue(attrs,"href");
if (tmp != null) try {
  baseUrl=new URL(tmp);
}
 catch (MalformedURLException e) {
  log.warn("Invalid BASE tag " + tmp);
}
break;
}
if (name.equalsIgnoreCase("img")) {
addURL(urls,getValue(attrs,"src"),baseUrl);
break;
}
if (name.equalsIgnoreCase("applet")) {
addURL(urls,getValue(attrs,"code"),baseUrl);
break;
}
if (name.equalsIgnoreCase("input")) {
String src=getValue(attrs,"src");
String typ=getValue(attrs,"type");
if ((src != null) && (typ.equalsIgnoreCase("image"))) {
addURL(urls,src,baseUrl);
}
break;
}
if (name.equalsIgnoreCase("link")) {
addURL(urls,getValue(attrs,"href"),baseUrl);
break;
}
String back=getValue(attrs,"background");
if (back != null) {
addURL(urls,back,baseUrl);
break;
}
NodeList children=node.getChildNodes();
if (children != null) {
int len=children.getLength();
for (int i=0; i < len; i++) {
scanNodes(children.item(i),urls,baseUrl);
}
}
break;
}
}
