{
  running=true;
  try {
    log.info("Creating Daemon Socket...");
    MainSocket=new ServerSocket(daemonPort);
    log.info(" port " + daemonPort + " OK");
    log.info("Proxy up and running!");
    while (running) {
      Socket ClientSocket=MainSocket.accept();
      Proxy thd=(Proxy)proxyClass.newInstance();
      thd.configure(ClientSocket,target);
      thd.start();
    }
    log.info("Proxy Server stopped");
  }
 catch (  Exception e) {
    log.warn("Proxy Server stopped",e);
  }
 finally {
    try {
      MainSocket.close();
    }
 catch (    Exception exc) {
    }
  }
}
