{
  KeyManagerFactory kmf=KeyManagerFactory.getInstance(KEYMANAGERFACTORY);
  KeyStore ks=getKeyStore(JMeterUtils.getPropDefault("proxy.cert.keystorepass",DEFAULT_PASSWORD).toCharArray());
  kmf.init(ks,JMeterUtils.getPropDefault("proxy.cert.keypassword",DEFAULT_PASSWORD).toCharArray());
  final KeyManager[] keyManagers=kmf.getKeyManagers();
  if (serverAlias == null) {
    return keyManagers;
  }
 else {
    if (!ks.containsAlias(serverAlias)) {
      throw new IOException("Keystore does not contain alias " + serverAlias);
    }
    final int keyManagerCount=keyManagers.length;
    final KeyManager[] wrappedKeyManagers=new KeyManager[keyManagerCount];
    for (int i=0; i < keyManagerCount; i++) {
      wrappedKeyManagers[i]=new ServerAliasKeyManager(keyManagers[i],serverAlias);
    }
    return wrappedKeyManagers;
  }
}
