{
  if (filterContentType(result) && filterUrl(sampler)) {
    JMeterTreeNode myTarget=findTargetControllerNode();
    @SuppressWarnings("unchecked") Collection<ConfigTestElement> defaultConfigurations=(Collection<ConfigTestElement>)findApplicableElements(myTarget,ConfigTestElement.class,false);
    @SuppressWarnings("unchecked") Collection<Arguments> userDefinedVariables=(Collection<Arguments>)findApplicableElements(myTarget,Arguments.class,true);
    removeValuesFromSampler(sampler,defaultConfigurations);
    replaceValues(sampler,subConfigs,userDefinedVariables);
    sampler.setAutoRedirects(samplerRedirectAutomatically);
    sampler.setFollowRedirects(samplerFollowRedirects);
    sampler.setUseKeepAlive(useKeepAlive);
    sampler.setImageParser(samplerDownloadImages);
    placeSampler(sampler,subConfigs,myTarget);
  }
 else {
    if (log.isDebugEnabled()) {
      log.debug("Sample excluded based on url or content-type: " + result.getUrlAsString() + " - "+ result.getContentType());
    }
    result.setSampleLabel("[" + result.getSampleLabel() + "]");
  }
  notifySampleListeners(new SampleEvent(result,"WorkBench"));
}
