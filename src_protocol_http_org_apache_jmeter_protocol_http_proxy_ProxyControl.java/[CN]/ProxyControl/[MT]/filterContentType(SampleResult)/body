{
  String includeExp=getContentTypeInclude();
  String excludeExp=getContentTypeExclude();
  if ((includeExp == null || includeExp.length() == 0) && (excludeExp == null || excludeExp.length() == 0)) {
    return true;
  }
  String sampleContentType=result.getContentType();
  if (sampleContentType == null || sampleContentType.length() == 0) {
    if (log.isDebugEnabled()) {
      log.debug("No Content-type found for : " + result.getUrlAsString());
    }
    return true;
  }
  if (log.isDebugEnabled()) {
    log.debug("Content-type to filter : " + sampleContentType);
  }
  if (includeExp != null && includeExp.length() > 0) {
    if (log.isDebugEnabled()) {
      log.debug("Include expression : " + includeExp);
    }
    Pattern pattern=null;
    try {
      pattern=JMeterUtils.getPatternCache().getPattern(includeExp,Perl5Compiler.READ_ONLY_MASK | Perl5Compiler.SINGLELINE_MASK);
      if (!JMeterUtils.getMatcher().contains(sampleContentType,pattern)) {
        return false;
      }
    }
 catch (    MalformedCachePatternException e) {
      log.warn("Skipped invalid content include pattern: " + includeExp,e);
    }
  }
  if (excludeExp != null && excludeExp.length() > 0) {
    if (log.isDebugEnabled()) {
      log.debug("Exclude expression : " + excludeExp);
    }
    Pattern pattern=null;
    try {
      pattern=JMeterUtils.getPatternCache().getPattern(excludeExp,Perl5Compiler.READ_ONLY_MASK | Perl5Compiler.SINGLELINE_MASK);
      if (JMeterUtils.getMatcher().contains(sampleContentType,pattern)) {
        return false;
      }
    }
 catch (    MalformedCachePatternException e) {
      log.warn("Skipped invalid content exclude pattern: " + includeExp,e);
    }
  }
  return true;
}
