{
  for (int retry=1; retry <= 10; retry++) {
    try {
      conn=setupConnection(getUrl(),getMethod(),null);
      long time=System.currentTimeMillis();
      conn.connect();
      return time;
    }
 catch (    BindException e) {
      log.debug("Bind exception, try again");
      if (retry == 10) {
        log.error("Can't connect",e);
        throw e;
      }
      conn.disconnect();
      conn=null;
      this.setUseKeepAlive(false);
      continue;
    }
catch (    IOException e) {
      log.debug("Connection failed, giving up");
      conn.disconnect();
      conn=null;
      throw e;
    }
  }
  throw new BindException();
}
