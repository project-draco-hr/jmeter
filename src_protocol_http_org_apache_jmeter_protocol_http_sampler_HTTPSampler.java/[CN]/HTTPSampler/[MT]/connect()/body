{
  long time=System.currentTimeMillis();
  try {
    conn.connect();
  }
 catch (  BindException e) {
    log.debug("Bind exception, try again");
    if (connectionTries++ == 10) {
      log.error("Can't connect",e);
      throw e;
    }
    conn.disconnect();
    conn=null;
    System.gc();
    Runtime.getRuntime().runFinalization();
    this.setUseKeepAlive(false);
    conn=setupConnection(getUrl(),getMethod());
    if (getMethod().equals(HTTPSampler.POST)) {
      postWriter.setHeaders(conn,this);
    }
    time=connect();
  }
catch (  IOException e) {
    log.debug("Connection failed, giving up");
    conn.disconnect();
    conn=null;
    System.gc();
    Runtime.getRuntime().runFinalization();
    throw e;
  }
  return time;
}
