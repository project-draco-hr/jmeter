{
  String pathAndQuery=null;
  if (this.getMethod().equals(HTTPSampler.GET) && getQueryString().length() > 0) {
    if (this.getEncodedPath().indexOf("?") > -1) {
      pathAndQuery=this.getEncodedPath() + "&" + getQueryString();
    }
 else {
      pathAndQuery=this.getEncodedPath() + "?" + getQueryString();
    }
  }
 else {
    pathAndQuery=this.getEncodedPath();
  }
  if (!pathAndQuery.startsWith("/")) {
    pathAndQuery="/" + pathAndQuery;
  }
  if (getPort() == 0) {
    return new URL(getProtocol(),getDomain(),pathAndQuery);
  }
 else {
    return new URL(getProtocol(),getPropertyAsString(HTTPSampler.DOMAIN),getPort(),pathAndQuery);
  }
}
