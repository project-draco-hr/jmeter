{
  byte[] buffer=new byte[4096];
  BufferedInputStream in;
  try {
    in=new BufferedInputStream(conn.getInputStream());
  }
 catch (  Exception e) {
    in=new BufferedInputStream(conn.getErrorStream());
  }
  java.io.ByteArrayOutputStream w=new ByteArrayOutputStream();
  int x=0;
  while ((x=in.read(buffer)) > -1) {
    w.write(buffer,0,x);
  }
  in.close();
  w.flush();
  w.close();
  return w.toByteArray();
}
