{
  PropertyIterator args=sampler.getArguments().iterator();
  while (args.hasNext()) {
    Argument arg=(Argument)args.next().getObjectValue();
    post.addParameter(arg.getName(),arg.getValue());
  }
  String filename=sampler.getFilename();
  if ((filename != null) && (filename.trim().length() > 0)) {
    File input=new File(filename);
    if (input.length() < Integer.MAX_VALUE) {
      post.setRequestContentLength((int)input.length());
    }
 else {
      post.setRequestContentLength(EntityEnclosingMethod.CONTENT_LENGTH_CHUNKED);
    }
    post.setRequestHeader("Content-Disposition","form-data; name=\"" + encode(sampler.getFileField()) + "\"; filename=\""+ encode(filename)+ "\"");
    post.setRequestHeader("Content-type",sampler.getMimetype());
    post.setRequestBody(new FileInputStream(input));
  }
}
