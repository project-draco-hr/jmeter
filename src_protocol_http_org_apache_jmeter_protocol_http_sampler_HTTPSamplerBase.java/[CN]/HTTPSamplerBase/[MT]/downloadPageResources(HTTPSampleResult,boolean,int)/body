{
  Iterator urls=null;
  try {
    if (res.getContentType().toLowerCase().indexOf("text/html") != -1) {
      urls=HTMLParser.getParser().getEmbeddedResourceURLs(res.getResponseData(),res.getURL());
    }
  }
 catch (  HTMLParseException e) {
    res.addSubResult(errorResult(e,res));
    res.setSuccessful(false);
  }
  if (urls != null && urls.hasNext()) {
    if (createContainerResult) {
      res=new HTTPSampleResult(res);
    }
    while (urls.hasNext()) {
      Object binURL=urls.next();
      try {
        HTTPSampleResult binRes=sample((URL)binURL,GET,false,frameDepth + 1);
        res.addSubResult(binRes);
        res.setSuccessful(res.isSuccessful() && binRes.isSuccessful());
      }
 catch (      ClassCastException e) {
        res.addSubResult(errorResult(new Exception(binURL + " is not a correct URI"),res));
        res.setSuccessful(false);
        continue;
      }
    }
  }
  return res;
}
