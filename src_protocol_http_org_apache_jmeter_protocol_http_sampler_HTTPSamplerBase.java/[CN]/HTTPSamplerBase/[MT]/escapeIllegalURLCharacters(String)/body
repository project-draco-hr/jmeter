{
  if (url == null || url.toLowerCase().startsWith("file:")) {
    return url;
  }
  try {
    String escapedUrl=ConversionUtils.escapeIllegalURLCharacters(url);
    if (log.isDebugEnabled()) {
      log.debug("Successfully escaped url:'" + url + "' to:'"+ escapedUrl+ "'");
    }
    return escapedUrl;
  }
 catch (  Exception e1) {
    log.error("Error escaping URL:'" + url + "', message:"+ e1.getMessage());
    return url;
  }
}
