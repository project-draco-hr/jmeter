{
  String pathAndQuery=null;
  if (this.getMethod().equals(GET) && getQueryString().length() > 0) {
    if (this.getEncodedPath().indexOf("?") > -1) {
      pathAndQuery=this.getEncodedPath() + "&" + getQueryString();
    }
 else {
      pathAndQuery=this.getEncodedPath() + "?" + getQueryString();
    }
  }
 else {
    pathAndQuery=this.getEncodedPath();
  }
  if (!pathAndQuery.startsWith("/")) {
    pathAndQuery="/" + pathAndQuery;
  }
  if (getPort() == UNSPECIFIED_PORT || getPort() == DEFAULT_HTTP_PORT) {
    return new URL(getProtocol(),getDomain(),pathAndQuery);
  }
 else {
    return new URL(getProtocol(),getPropertyAsString(DOMAIN),getPort(),pathAndQuery);
  }
}
