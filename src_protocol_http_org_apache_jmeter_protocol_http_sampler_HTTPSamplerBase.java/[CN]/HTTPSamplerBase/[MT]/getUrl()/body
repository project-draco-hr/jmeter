{
  StringBuffer pathAndQuery=new StringBuffer(100);
  String path=this.getPath();
  if (!path.startsWith("/")) {
    pathAndQuery.append("/");
  }
  pathAndQuery.append(path);
  if (this.getMethod().equals(GET) && getQueryString().length() > 0) {
    if (path.indexOf(QRY_PFX) > -1) {
      pathAndQuery.append(QRY_SEP);
    }
 else {
      pathAndQuery.append(QRY_PFX);
    }
    pathAndQuery.append(getQueryString());
  }
  if (getPort() == UNSPECIFIED_PORT || getPort() == DEFAULT_HTTP_PORT) {
    return new URL(getProtocol(),getDomain(),pathAndQuery.toString());
  }
  return new URL(getProtocol(),getPropertyAsString(DOMAIN),getPort(),pathAndQuery.toString());
}
