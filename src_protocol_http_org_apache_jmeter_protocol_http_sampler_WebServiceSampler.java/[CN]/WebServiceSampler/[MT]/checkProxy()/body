{
  if (System.getProperty("JMeter.NonGui") != null && System.getProperty("JMeter.NonGui").equals("true")) {
    this.setUseProxy(true);
    String port=this.getPropertyAsString(PROXY_PORT);
    String host=this.getPropertyAsString(PROXY_HOST);
    if (host == null || host.length() == 0) {
      if (System.getProperty("http.proxyHost") != null) {
        host=System.getProperty("http.proxyHost");
        this.setProxyHost(host);
      }
    }
    if (port == null || port.length() == 0) {
      if (System.getProperty("http.proxyPort") != null) {
        port=System.getProperty("http.proxyPort");
        this.setProxyPort(port);
      }
    }
  }
}
