{
  this.setRunningVersion(true);
  TestBeanHelper.prepare(this);
  JMeterVariables variables=getThreadContext().getVariables();
  String poolName=getDataSource();
  if (variables.getObject(poolName) != null) {
    log.error("JDBC data source already defined for: " + poolName);
  }
 else {
    String maxPool=getPoolMax();
    if (maxPool.equals("0")) {
      variables.putObject(poolName,new DataSourceComponentImpl());
    }
 else {
      ResourceLimitingJdbcDataSource src=initPool(maxPool);
synchronized (this) {
        excaliburSource=src;
        variables.putObject(poolName,new DataSourceComponentImpl(excaliburSource));
      }
    }
  }
}
