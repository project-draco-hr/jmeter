{
  String className=((JMeterProperty)properties.get(JDBCSampler.CONNECTION_POOL_IMPL)).getStringValue();
  Class types[]=new Class[]{DBKey.class,Map.class};
  Object params[]=new Object[]{key,properties};
  try {
    Class poolClass=Class.forName(className);
    Constructor constructor=poolClass.getConstructor(types);
    return (ConnectionPool)constructor.newInstance(params);
  }
 catch (  Exception e) {
    log.error("Error instantiating JDBC connection pool class '" + className + "'",e);
    throw new ConnectionPoolException("Error instantiating JDBC connection pool class '" + className + "': "+ e);
  }
}
