{
  SampleResult result=new SampleResult();
  result.setSampleLabel(getName());
  if (publisher == null) {
    initClient();
  }
  StringBuilder buffer=new StringBuilder();
  int loop=getIterationCount();
  if (publisher != null) {
    result.sampleStart();
    for (int idx=0; idx < loop; idx++) {
      String tmsg=getMessageContent();
      publisher.publish(tmsg);
      buffer.append(tmsg);
    }
    result.sampleEnd();
    result.setResponseCodeOK();
    result.setResponseMessage(loop + " messages published");
    result.setSuccessful(true);
    result.setSamplerData(buffer.toString());
    result.setSampleCount(loop);
  }
  return result;
}
