{
  SampleResult result=new SampleResult();
  result.setSampleLabel(getName());
  initListenerClient();
  int loop=this.getIterationCount();
  result.sampleStart();
  int read;
  while ((read=this.count(0)) < loop && interrupted == false) {
    try {
      Thread.sleep(0,50);
    }
 catch (    InterruptedException e) {
      log.debug(e.getMessage());
    }
  }
  result.sampleEnd();
  result.setResponseMessage(read + " samples messages received");
synchronized (this) {
    if (this.getReadResponseAsBoolean()) {
      result.setResponseData(this.BUFFER.toString().getBytes());
    }
 else {
      result.setBytes(this.BUFFER.toString().getBytes().length);
    }
  }
  result.setSuccessful(true);
  result.setResponseCode(read + " message(s) received successfully");
  result.setSamplerData("Not applicable");
  result.setSampleCount(read);
  this.resetCount();
  return result;
}
