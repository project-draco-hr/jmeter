{
  PluginManager.install(this,true);
  JMeterTreeModel treeModel=new JMeterTreeModel();
  JMeterTreeListener treeLis=new JMeterTreeListener(treeModel);
  treeLis.setActionHandler(ActionRouter.getInstance());
  GuiPackage.getInstance(treeLis,treeModel);
  org.apache.jmeter.gui.ReportMainFrame main=new org.apache.jmeter.gui.ReportMainFrame(ActionRouter.getInstance(),treeModel,treeLis);
  main.setTitle("Apache JMeter Report");
  main.setIconImage(JMeterUtils.getImage("jmeter.jpg").getImage());
  ComponentUtil.centerComponentInWindow(main,80);
  main.show();
  ActionRouter.getInstance().actionPerformed(new ActionEvent(main,1,CheckDirty.ADD_ALL));
  if (testFile != null) {
    try {
      File f=new File(testFile.getArgument());
      log.info("Loading file: " + f);
      FileInputStream reader=new FileInputStream(f);
      HashTree tree=SaveService.loadTree(reader);
      GuiPackage.getInstance().setTestPlanFile(f.getAbsolutePath());
      new Load().insertLoadedTree(1,tree);
    }
 catch (    Exception e) {
      log.error("Failure loading test file",e);
      JMeterUtils.reportErrorToUser(e.toString());
    }
  }
}
