{
  extractor.setXPathQuery("/book/preface");
  extractor.process();
  assertEquals("zero",vars.get(VAL_NAME));
  assertEquals("1",vars.get(VAL_NAME_NR));
  assertEquals("zero",vars.get(VAL_NAME + "_1"));
  assertNull(vars.get(VAL_NAME + "_2"));
  extractor.setXPathQuery("/book/page");
  extractor.process();
  assertEquals("one",vars.get(VAL_NAME));
  assertEquals("2",vars.get(VAL_NAME_NR));
  assertEquals("one",vars.get(VAL_NAME + "_1"));
  assertEquals("two",vars.get(VAL_NAME + "_2"));
  assertNull(vars.get(VAL_NAME + "_3"));
  extractor.setXPathQuery("/book/page[2]");
  extractor.process();
  assertEquals("two",vars.get(VAL_NAME));
  assertEquals("1",vars.get(VAL_NAME_NR));
  assertEquals("two",vars.get(VAL_NAME + "_1"));
  assertNull(vars.get(VAL_NAME + "_2"));
  assertNull(vars.get(VAL_NAME + "_3"));
  extractor.setXPathQuery("/book/index");
  extractor.process();
  assertEquals("Default",vars.get(VAL_NAME));
  assertEquals("0",vars.get(VAL_NAME_NR));
  assertNull(vars.get(VAL_NAME + "_1"));
  extractor.setXPathQuery("/book/a");
  extractor.process();
  assertEquals("Default",vars.get(VAL_NAME));
  assertEquals("1",vars.get(VAL_NAME_NR));
  assertNull(vars.get(VAL_NAME + "_1"));
  extractor.setXPathQuery("/book/empty");
  extractor.process();
  assertEquals("Default",vars.get(VAL_NAME));
  assertEquals("1",vars.get(VAL_NAME_NR));
  assertNull(vars.get(VAL_NAME + "_1"));
  extractor.setXPathQuery("//a");
  extractor.process();
  assertEquals("Default",vars.get(VAL_NAME));
  extractor.setXPathQuery("/book/page[2]");
  extractor.setFragment(true);
  extractor.process();
  assertEquals("<page>two</page>",vars.get(VAL_NAME));
  extractor.setXPathQuery("/book/page[2]/text()");
  extractor.process();
  assertEquals("two",vars.get(VAL_NAME));
  extractor.setXPathQuery("//a");
  extractor.process();
  assertEquals("<a><b/></a>",vars.get(VAL_NAME));
}
