{
  String src="";
  try {
    splitParams("a,b,c",null,null);
    fail("Expected InvalidVariableException (wrong number of parameters)");
  }
 catch (  InvalidVariableException e) {
  }
  src="a,b,c";
  SplitFunction split;
  split=splitParams(src,"VAR1",null);
  assertEquals(src,split.execute());
  assertEquals(src,vars.get("VAR1"));
  assertEquals("3",vars.get("VAR1_n"));
  assertEquals("a",vars.get("VAR1_1"));
  assertEquals("b",vars.get("VAR1_2"));
  assertEquals("c",vars.get("VAR1_3"));
  assertNull(vars.get("VAR1_4"));
  split=splitParams(src,"VAR2",",");
  assertEquals(src,split.execute());
  assertEquals(src,vars.get("VAR2"));
  assertEquals("3",vars.get("VAR2_n"));
  assertEquals("a",vars.get("VAR2_1"));
  assertEquals("b",vars.get("VAR2_2"));
  assertEquals("c",vars.get("VAR2_3"));
  assertNull(vars.get("VAR2_4"));
  src="a|b|c";
  split=splitParams(src,"VAR3","|");
  assertEquals(src,split.execute());
  assertEquals(src,vars.get("VAR3"));
  assertEquals("3",vars.get("VAR3_n"));
  assertEquals("a",vars.get("VAR3_1"));
  assertEquals("b",vars.get("VAR3_2"));
  assertEquals("c",vars.get("VAR3_3"));
  assertNull(vars.get("VAR3_4"));
  src="a|b||";
  split=splitParams(src,"VAR4","|");
  assertEquals(src,split.execute());
  assertEquals(src,vars.get("VAR4"));
  assertEquals("4",vars.get("VAR4_n"));
  assertEquals("a",vars.get("VAR4_1"));
  assertEquals("b",vars.get("VAR4_2"));
  assertEquals("?",vars.get("VAR4_3"));
  assertNull(vars.get("VAR4_5"));
  src="a,,c";
  vars.put("VAR",src);
  split=splitParams("${VAR}","VAR",null);
  assertEquals(src,split.execute());
  assertEquals("3",vars.get("VAR_n"));
  assertEquals("a",vars.get("VAR_1"));
  assertEquals("?",vars.get("VAR_2"));
  assertEquals("c",vars.get("VAR_3"));
  assertNull(vars.get("VAR_4"));
  src="a,b";
  vars.put("VAR",src);
  split=splitParams("${VAR}","VAR",null);
  assertEquals(src,split.execute());
  assertEquals("2",vars.get("VAR_n"));
  assertEquals("a",vars.get("VAR_1"));
  assertEquals("b",vars.get("VAR_2"));
  assertNull(vars.get("VAR_3"));
  src="a,,c,";
  vars.put("VAR",src);
  split=splitParams("${VAR}","VAR5",null);
  assertEquals(src,split.execute());
  assertEquals("4",vars.get("VAR5_n"));
  assertEquals("a",vars.get("VAR5_1"));
  assertEquals("?",vars.get("VAR5_2"));
  assertEquals("c",vars.get("VAR5_3"));
  assertEquals("?",vars.get("VAR5_4"));
  assertNull(vars.get("VAR5_5"));
}
