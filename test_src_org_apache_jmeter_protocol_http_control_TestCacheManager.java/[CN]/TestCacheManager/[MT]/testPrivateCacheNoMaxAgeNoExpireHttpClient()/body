{
  this.cacheManager.setUseExpires(true);
  this.cacheManager.testIterationStart(null);
  assertNull("Should not find entry",getThreadCacheEntry(LOCAL_HOST));
  assertFalse("Should not find valid entry",this.cacheManager.inCache(url));
  ((HttpMethodStub)httpMethod).cacheControl="private";
  ((HttpMethodStub)httpMethod).lastModifiedHeader=new Header(HTTPConstants.LAST_MODIFIED,makeDate(new Date(System.currentTimeMillis() - (10 * 5 * 1000))));
  this.cacheManager.saveDetails(httpMethod,sampleResultOK);
  assertNotNull("Should find entry",getThreadCacheEntry(LOCAL_HOST));
  assertTrue("Should find valid entry",this.cacheManager.inCache(url));
  Thread.sleep(5001);
  assertNotNull("Should find entry",getThreadCacheEntry(LOCAL_HOST));
  assertFalse("Should not find valid entry",this.cacheManager.inCache(url));
}
