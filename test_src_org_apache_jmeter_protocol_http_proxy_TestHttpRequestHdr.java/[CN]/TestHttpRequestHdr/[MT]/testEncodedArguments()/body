{
  String url="http://localhost/matrix.html";
  String contentEncoding="";
  String queryString="abc%3FSPACE=a+b&space=a%20b&query=What%3F";
  String testGetRequest="GET " + url + "?"+ queryString+ " HTTP/1.1\r\n\r\n";
  HTTPSamplerBase s=getSamplerForRequest(null,testGetRequest,null);
  assertEquals(HTTPSamplerBase.GET,s.getMethod());
  assertEquals(queryString,s.getQueryString());
  assertEquals(contentEncoding,s.getContentEncoding());
  Arguments arguments=s.getArguments();
  assertEquals(3,arguments.getArgumentCount());
  checkArgument((HTTPArgument)arguments.getArgument(0),"abc%3FSPACE","a+b","a+b",contentEncoding,false);
  checkArgument((HTTPArgument)arguments.getArgument(1),"space","a%20b","a%20b",contentEncoding,false);
  checkArgument((HTTPArgument)arguments.getArgument(2),"query","What%3F","What%3F",contentEncoding,false);
  contentEncoding="UTF-8";
  queryString="abc%3FSPACE=a+b&space=a%20b&query=What%3F";
  testGetRequest="GET " + url + "?"+ queryString+ " HTTP/1.1\r\n\r\n";
  s=getSamplerForRequest(url,testGetRequest,contentEncoding);
  assertEquals(HTTPSamplerBase.GET,s.getMethod());
  String expectedQueryString="abc%3FSPACE=a+b&space=a+b&query=What%3F";
  assertEquals(expectedQueryString,s.getQueryString());
  assertEquals(contentEncoding,s.getContentEncoding());
  arguments=s.getArguments();
  assertEquals(3,arguments.getArgumentCount());
  checkArgument((HTTPArgument)arguments.getArgument(0),"abc?SPACE","a b","a+b",contentEncoding,true);
  checkArgument((HTTPArgument)arguments.getArgument(1),"space","a b","a+b",contentEncoding,true);
  checkArgument((HTTPArgument)arguments.getArgument(2),"query","What?","What%3F",contentEncoding,true);
  contentEncoding="";
  String postBody="abc%3FSPACE=a+b&space=a%20b&query=What%3F";
  String testPostRequest="POST " + url + " HTTP/1.1\r\n"+ "Content-type: "+ HTTPSamplerBase.APPLICATION_X_WWW_FORM_URLENCODED+ "\r\n"+ "Content-length: "+ getBodyLength(postBody,contentEncoding)+ "\r\n"+ "\r\n"+ postBody;
  s=getSamplerForRequest(null,testPostRequest,null);
  assertEquals(HTTPSamplerBase.POST,s.getMethod());
  assertEquals(queryString,s.getQueryString());
  assertEquals(contentEncoding,s.getContentEncoding());
  assertFalse(s.getDoMultipartPost());
  arguments=s.getArguments();
  assertEquals(3,arguments.getArgumentCount());
  checkArgument((HTTPArgument)arguments.getArgument(0),"abc%3FSPACE","a+b","a+b",contentEncoding,false);
  checkArgument((HTTPArgument)arguments.getArgument(1),"space","a%20b","a%20b",contentEncoding,false);
  checkArgument((HTTPArgument)arguments.getArgument(2),"query","What%3F","What%3F",contentEncoding,false);
  contentEncoding="UTF-8";
  postBody="abc?SPACE=a+b&space=a%20b&query=What?";
  testPostRequest="POST " + url + " HTTP/1.1\n"+ "Content-type: "+ HTTPSamplerBase.APPLICATION_X_WWW_FORM_URLENCODED+ "\r\n"+ "Content-length: "+ getBodyLength(postBody,contentEncoding)+ "\r\n"+ "\r\n"+ postBody;
  s=getSamplerForRequest(url,testPostRequest,contentEncoding);
  assertEquals(HTTPSamplerBase.POST,s.getMethod());
  expectedQueryString="abc%3FSPACE=a+b&space=a+b&query=What%3F";
  assertEquals(expectedQueryString,s.getQueryString());
  assertEquals(contentEncoding,s.getContentEncoding());
  assertFalse(s.getDoMultipartPost());
  arguments=s.getArguments();
  assertEquals(3,arguments.getArgumentCount());
  checkArgument((HTTPArgument)arguments.getArgument(0),"abc?SPACE","a b","a+b",contentEncoding,true);
  checkArgument((HTTPArgument)arguments.getArgument(1),"space","a b","a+b",contentEncoding,true);
  checkArgument((HTTPArgument)arguments.getArgument(2),"query","What?","What%3F",contentEncoding,true);
}
