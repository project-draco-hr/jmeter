{
  ArrayList alf=new ArrayList(500);
  String res=getResName(resname);
  subTestFailures+=readRF(res,alf);
  Collections.sort(alf);
  String last="";
  for (int i=0; i < alf.size(); i++) {
    String curr=(String)alf.get(i);
    if (curr.equals(last)) {
      subTestFailures++;
      System.out.println("\nDuplicate key =" + curr + " in "+ res);
    }
    last=curr;
  }
  if (resname.length() == 0) {
    defaultPRB=getRAS(res);
  }
 else   if (checkUnexpected) {
    PropertyResourceBundle prb=getRAS(res);
    Enumeration enumr=prb.getKeys();
    while (enumr.hasMoreElements()) {
      String key=null;
      try {
        key=(String)enumr.nextElement();
        String val=defaultPRB.getString(key);
        if (!resname.equalsIgnoreCase("de") && val.equals(prb.getString(key))) {
          System.out.println("Possible duplicate value for " + key + " in "+ res);
          subTestFailures++;
        }
      }
 catch (      MissingResourceException e) {
        subTestFailures++;
        System.out.println("Locale: " + resname + " has unexpected key: "+ key);
      }
    }
  }
  if (subTestFailures > 0) {
    fail("One or more subtests failed");
  }
}
