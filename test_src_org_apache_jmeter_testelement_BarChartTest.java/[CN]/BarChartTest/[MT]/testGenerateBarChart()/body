{
  log.info("jtl version=" + JMeterUtils.getProperty("file_format.testlog"));
  String sampleLog=findTestPath("testfiles/sample_log1.jtl");
  String sampleLog2=findTestPath("testfiles/sample_log1b.jtl");
  String sampleLog3=findTestPath("testfiles/sample_log1c.jtl");
  JTLData input=new JTLData();
  JTLData input2=new JTLData();
  JTLData input3=new JTLData();
  input.setDataSource(sampleLog);
  input.loadData();
  input2.setDataSource(sampleLog2);
  input2.loadData();
  input3.setDataSource(sampleLog3);
  input3.loadData();
  assertTrue((input.getStartTimestamp() > 0));
  assertTrue((input.getEndTimestamp() > input.getStartTimestamp()));
  assertTrue((input.getURLs().size() > 0));
  log.info("URL count=" + input.getURLs().size());
  java.util.ArrayList<DataSet> list=new java.util.ArrayList<DataSet>();
  list.add(input);
  list.add(input2);
  list.add(input3);
  BarChart bchart=new BarChart();
  bchart.setTitle("Sample Chart");
  bchart.setCaption("Sample");
  bchart.setName("Sample");
  bchart.setYAxis("milliseconds");
  bchart.setYLabel("Test Runs");
  bchart.setXAxis(AbstractTable.REPORT_TABLE_90_PERCENT);
  bchart.setXLabel(AbstractChart.X_DATA_DATE_LABEL);
  bchart.setURL("jakarta_home");
  JComponent gr=bchart.renderChart(list);
  assertNotNull(gr);
  SaveGraphicsService serv=new SaveGraphicsService();
  String filename=bchart.getTitle();
  filename=filename.replace(' ','_');
  if (!"true".equalsIgnoreCase(System.getProperty("java.awt.headless"))) {
    String outName=File.createTempFile(filename,null).getAbsolutePath();
    serv.saveJComponent(outName,SaveGraphicsService.PNG,gr);
    assertTrue("Should have created the file",new File(outName + ".png").exists());
  }
}
