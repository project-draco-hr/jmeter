{
  ConstantThroughputTimer timer=new ConstantThroughputTimer();
  ConstantThroughputTimerBeanInfo bi=new ConstantThroughputTimerBeanInfo();
  ResourceBundle rb=(ResourceBundle)bi.getBeanDescriptor().getValue(BeanInfoSupport.RESOURCE_BUNDLE);
  timer.setCalcMode(rb.getString("calcMode.2"));
  assertEquals(1,timer.getCalcModeInt());
  for (int i=1; i <= 10; i++) {
    TestJMeterContextService.incrNumberOfThreads();
  }
  assertEquals(10,JMeterContextService.getNumberOfThreads());
  timer.setThroughput(600.0);
  assertEquals(1000,timer.calculateCurrentTarget(0));
  timer.setThroughput(600000.0);
  assertEquals(1,timer.calculateCurrentTarget(0));
  for (int i=1; i <= 990; i++) {
    TestJMeterContextService.incrNumberOfThreads();
  }
  assertEquals(1000,JMeterContextService.getNumberOfThreads());
  timer.setThroughput(60000000.0);
  assertEquals(1,timer.calculateCurrentTarget(0));
}
